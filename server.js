{"0":"// server.js","1":"const express = require('express');","2":"const bodyParser = require('body-parser');","3":"const cors = require('cors');","4":"const crypto = require('crypto');","5":"","6":"const app = express();","7":"app.use(cors());","8":"app.use(bodyParser.json());","9":"","10":"const prizes = [","11":"{ label: '%5 İndirim', value: '5' },","12":"{ label: '%10 İndirim', value: '10' },","13":"{ label: '%15 İndirim', value: '15' },","14":"{ label: '%20 İndirim', value: '20' },","15":"{ label: 'Ücretsiz Kargo', value: 'FREESHIP' },","16":"{ label: 'Tekrar Dene', value: '0' }","17":"];","18":"","19":"function generateCode(prefix = 'VELLEITY') {","20":"const rand = crypto.randomBytes(2).toString('hex').toUpperCase();","21":"return `${prefix}-${rand}`;","22":"}","23":"","24":"app.post('/spin', (req, res) => {","25":"const index = Math.floor(Math.random() * prizes.length);","26":"const prize = prizes[index];","27":"const code = generateCode();","28":"res.json({","29":"index,","30":"coupon: code,","31":"label: prize.label","32":"});","33":"});","34":"","35":"const PORT = process.env.PORT || 3000;","36":"app.listen(PORT, () => console.log(`VELLEITY Çark Sunucusu ${PORT} portunda çalışıyor`));","37":""}